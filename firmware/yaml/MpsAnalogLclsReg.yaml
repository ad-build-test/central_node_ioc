##############################################################################
## This file is part of 'SLAC Firmware Standard Library'.
## It is subject to the license terms in the LICENSE.txt file found in the
## top-level directory of this distribution and at:
##    https://confluence.slac.stanford.edu/display/ppareg/LICENSE.html.
## No part of 'SLAC Firmware Standard Library', including this file,
## may be copied, modified, propagated, or distributed except according to
## the terms contained in the LICENSE.txt file.
##############################################################################
#schemaversion 3.0.0
#once MpsAnalogLclsReg.yaml
MpsAnalogLclsReg: &MpsAnalogLclsReg
  class: MMIODev
  configPrio: 1
  description: MPS Analog Core
  size: 0x10000
  ########
  children:
  ########
    #########################################################
    IntegrationCounts:
      class: IntField
      at:
        offset: 0x0000
        stride: 4
        nelms: 24
      sizeBits: 16
      lsBit: 0
      mode: RW
      description: "LCLS Integration Count."
    #########################################################
    ProcessingSelect:
      class: IntField
      at:
        offset: 0x0060
        stride: 4
        nelms: 6
      sizeBits: 4
      lsBit: 0
      mode: RW
      enums:
        - { name: "None",            value: 0 }
        - { name: "Integration",     value: 1 }
        - { name: "Linear Equation", value: 2 }
      description: "LCLS Processing Selection."
    #########################################################
    Slope:
      class: IntField
      at:
        offset: 0x0078
        stride: 4
        nelms: 6
      sizeBits: 16
      isSigned: true
      lsBit: 0
      mode: RW
      description: "LCLS Equation Slope."
    #########################################################
    Intercept:
      class: IntField
      at:
        offset: 0x007A
        stride: 4
        nelms: 6
      sizeBits: 16
      isSigned: true
      lsBit: 0
      mode: RW
      description: "LCLS Equation Intercept."
    #########################################################
    PrcValueSelect:
      class: IntField
      at:
        offset: 0x0090
      sizeBits: 2
      lsBit: 0
      mode: RW
      enums:
        - { name: "Peak",    value: 0 }
        - { name: "Forced",  value: 1 }
        - { name: "Minimum", value: 2 }
        - { name: "Average", value: 3 }
      description: "LCLS Select value to be processed."
    #########################################################
    ForcePrcVals:
      class: IntField
      at:
        offset: 0x0094
        stride: 4
        nelms: 6
      sizeBits: 16
      isSigned: true
      lsBit: 0
      mode: RW
      description: "LCLS Force values to be processed."
    #########################################################
    InputDisable:
      class: IntField
      at:
        offset: 0x00B0
      sizeBits: 2
      lsBit: 0
      mode: RW
      enums:
        - { name: "None", value: 0 }
        - { name: "Bay0", value: 1 }
        - { name: "Bay1", value: 2 }
        - { name: "Both", value: 3 }
      description: "LCLS Disable analog AMC card."
    #########################################################
    bunchPresentIntEn:
      class: IntField
      at:
        offset: 0x00B4
      sizeBits: 24
      lsBit: 0
      mode: RW
      description: "LCLS Enable boxcar integration only on bunch present signal, the rest input are 0."
    #########################################################
    offsetPolarity:
      class: IntField
      at:
        offset: 0x00B8
      sizeBits: 6
      lsBit: 0
      mode: RW
      description: "Define output substraction order 0(data - offest) or 1(offset-data)"
    #########################################################
    treshBlm:
      class: IntField
      at:
        offset: 0x00C0
        stride: 4
        nelms: 6
      sizeBits: 16
      isSigned: true
      lsBit: 0
      mode: RW
      description: "Theshold for BLM pulse difference between signal and pedestal"
    #########################################################
    triggerDelayPeak:
      class: IntField
      at:
        offset: 0x00E0
        stride: 4
        nelms: 6
      sizeBits: 16
      lsBit: 0
      mode: RW
      description: "Trigger delay for ADC window processing peak windowing, in JESD clocks(2-0)-JESD0,(5-3)-JESD1 "
    #########################################################
    triggerWidthPeak:
      class: IntField
      at:
        offset: 0x00E2
        stride: 4
        nelms: 6
      sizeBits: 16
      lsBit: 0
      mode: RW
      description: "Width for ADC window processing Peak windowing, in JESD clocks(2-0)-JESD0,(5-3)-JESD1 "
    #########################################################
    triggerDelayPedestal:
      class: IntField
      at:
        offset: 0x00F8
        stride: 4
        nelms: 6
      sizeBits: 16
      lsBit: 0
      mode: RW
      description: "Trigger delay for ADC window processing Pedestal windowing, in JESD clocks(2-0)-JESD0,(5-3)-JESD1 "
    #########################################################
    triggerWidthPedestal:
      class: IntField
      at:
        offset: 0x00FA
        stride: 4
        nelms: 6
      sizeBits: 16
      lsBit: 0
      mode: RW
      description: "Width for ADC window processing Pedestal windowing, in JESD clocks(2-0)-JESD0,(5-3)-JESD1"
    #########################################################

